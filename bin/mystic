#!/usr/bin/env ruby

require "mystic"

# Examples:
# mystic create migration InitialMigration
# mystic development migrate
# mystic production rollback

case ARGV[0].to_sym
when :create
  case ARGV[1].to_sym
  when :migration
		Mystic.create_migration(ARGV[2].dup)
  end
else
	begin
	 	Mystic.connect(ARGV[1])
	  case ARGV[0].to_sym
	  when :migrate
	  	Mystic.migrate
	  when :rollback
	  	Mystic.rollback
		when :console
			Mystic.console
		end
	 	Mystic.disconnect
	rescue Mystic::EnvironmentError => e
		puts e.message
	end
end